# 6. Audio Base Assembly

## A. Audio Base Pre-Assembly

### Required Parts

| Part                                       | Quantity | Image                                                                                                              |
|--------------------------------------------|----------|--------------------------------------------------------------------------------------------------------------------|
| `Base Audio Front Left`                    | 1        | ![Base Audio Front Left](images/3d-printed-parts/base-audio-front-left.jpg)                                        |
| `Base Audio Front Right`                   | 1        | ![Base Audio Front Right](images/3d-printed-parts/base-audio-front-right.jpg)                                      |
| `Base Audio Back Left`                     | 1        | ![Base Audio Back Left](images/3d-printed-parts/base-audio-back-left.jpg)                                          |
| `Base Audio Back Right`                    | 1        | ![Base Audio Back Right](images/3d-printed-parts/base-audio-back-right.jpg)                                        |
| `Dowel Pin`                                | 2        | ![Dowel Pin](images/hardware/dewel-pin.jpg)                                                                        |
| `Magnet`                                   | 16       | ![Magnet](images/hardware/magnet.jpg)                                                                              |
| `Assembled Speaker`                        | 4        | ![Assembled Speaker](images/electronics/assembled-speaker.jpg)                                                     |
| `Assembled Fan`                            | 2        | ![Assembled Fan](images/electronics/assembled-fan.jpg)                                                             |
| `Micro USB Connector`                      | 1        | ![Micro USB Connector](images/electronics/micro-usb-connector.jpg)                                                 |
| `Assembled Power Switch`                   | 1        | ![Assembled Power Switch](images/electronics/assembled-power-switch.jpg)                                           |
| `Ethernet Connector`                       | 1        | ![Ethernet Connector](images/electronics/ethernet-connector.jpg)                                                   |
| `Assembled Robot Power Connector - Female` | 1        | ![Assembled Robot Power Connector - Female](images/electronics/assembled-robot-power-connector-female.jpg)         |
| `Assembled White LED`                      | 2        | ![Assembled LED](images/electronics/assembled-LEDs.jpg)                                                            |
| `M3x8mm Plastic Screw`                     | 22       | ![M3x8mm Plastic Screw](images/hardware/M3x12mm-plastic.jpg)                                                       |
| `Fan Screw`                                | 8        | ![Fan Screw](images/hardware/fan-screw.jpg)                                                                        |
| `Assembled Push Button`                    | 4        | ![Assembled Push Button](images/electronics/assembled-push-button.jpg)                                                                    |
| `Assembled Light Sensor`                   | 4        | ![Assembled Light Sensor](images/electronics/assembled-light-sensor.jpg)                                                                  |
| `M2x5mm Plastic Screw`                     | 4        | ![M2x5mm Plastic Screw](images/hardware/M2x5mm-plastic.jpg)                                                        |

### Steps
1. Install four `magnets` with super glue into the dedicated holes on each of the `base audio front left`, `base audio front right`, `base audio back left`, `base audio back right` parts, as shown in the following pictures.

![Base Audio Parts Magnets](images/assemblies/06/magnet-1.jpg)
![Base Audio Parts Magnets](images/assemblies/06/magnet-2.jpg)
![Base Audio Parts Magnets](images/assemblies/06/magnet-3.jpg)
![Base Audio Parts Magnets](images/assemblies/06/magnet-4.jpg)

2. Install dowel pins on `base audio back left` part, as shown in the following picture.

![Base Audio Parts Dowel Pins](images/assemblies/06/dowel-pins.jpg)

3. Insert the `base audio front left` part into the `base audio front right`, then insert `base audio back left` part into the `base audio back right` to form the full circular base, as shown in the following picture.

![Base Audio Parts](images/assemblies/06/base-audio.jpg)

4. Put 6 `M3x8 plastic screws` to fix the parts together, as shown in the following pictures.

![Base Audio Screw 1](images/assemblies/06/base-audio-screws-1.jpg)
![Base Audio Screw 2](images/assemblies/06/base-audio-screws-2.jpg)
![Base Audio Screw 3](images/assemblies/06/base-audio-screws-3.jpg)

3. Install the `assembled speakers` with `M3x8 plastic screws`, as shown in the following pictures. The wire lengths are
   shown in the picture.

![Base Audio Speaker 1](images/assemblies/06/speaker-1.jpg)

![Base Audio Speaker 2](images/assemblies/06/speaker-2.jpg)

4. Install the `assembled fans` with `fan screws`, as shown in the following pictures.

![Base Audio Fan 1](images/assemblies/06/fan-1.jpg)
![Base Audio Fan 2](images/assemblies/06/fan-2.jpg)

5. Install the `Micro USB connector` as shown in the following picture.

![Base Audio Micro USB](images/assemblies/06/micro-usb-connector.jpg)

6. Install the `assembled power switch` as shown in the following picture.

![Base Audio Power Switch](images/assemblies/06/power-switch.jpg)

7. Install the `assembled push buttons` as shown in the following picture.

![Base Audio Push Buttons](images/assemblies/06/push-buttons.jpg)

8. Install the `assembled robot power connector` with epoxy glue, as shown in the following picture.

![Base Audio Power Connector](images/assemblies/06/power-connector.jpg)

9. Install the `assembled white LEDs` with epoxy glue, as shown in the following picture.

![Base Audio LEDs](images/assemblies/06/leds.jpg)

10. Install the `light sensors` with `M2x5 plastic screws`, as shown in the following pictures.

![Base Audio Light Sensors 1](images/assemblies/06/light-sensors-1.jpg)

![Base Audio Light Sensors 2](images/assemblies/06/light-sensors-2.jpg)

![Base Audio Light Sensors 3](images/assemblies/06/light-sensors-3.jpg)

![Base Audio Light Sensors 4](images/assemblies/06/light-sensors-4.jpg)

## B. Audio Base Assembly

### Required Parts

| Part                                       | Quantity | Image                                                                           |
| ------------------------------------------ | -------- | ------------------------------------------------------------------------------- |
| `Audio Base Pre-Assembly`                  | 1        |                                                                                 |
| `Base Disk Pre-Assembly`                   | 1        |                                                                                 |
| `M3x8mm Plastic Screw`                     | 12       | ![M3x8mm Plastic Screw](images/hardware/M3x8mm-plastic.jpg)                     |
| `Adafruit MAX9744`                         | 1        | ![Adafruit MAX9744](images/assemblies/04/amplifier-heat-shrink-tube.jpg)        |
| `M2 Nuts`                                  | 4        | ![M3 Nuts](images/hardware/M2-nut.jpg)                                          |
| `Assembled JST PHR-6 Cable`                | 1        |                                                                                 |
| `Female Power Connector with Ferrules`     | 1        | ![Power Connector - Female](images/electronics/power-connector-female.jpg)      |
| `19V Buck-Boost PCB`                       | 1        | ![19V Buck-Boost PCB](images/assemblies/02/buck-boost-19v-all.jpg)              |
| `M3 Nuts`                                  | 3        | ![M3 Nuts](images/hardware/M2-nut.jpg)                                          |
| `8-cm-Long 16 AWG Red Wire`                | 1        | ![`8-cm-long 16 AWG Red Wire](images/electronics/16-AWG-red-wire.jpg)           |
| `8-cm-Long 16 AWG Black Wire`              | 1        | ![`8-cm-long 16 AWG Black Wire](images/electronics/16-AWG-black-wire.jpg)       |
| `Male Power Connector with Ferrules`       | 1        | ![Power Connector - Male](images/electronics/power-connector-male.jpg)          |
| `Assembled LED Strip`                      | 3        |                                                                                 |

### Steps

1. Install the `base disk pre-assembly` onto the `audio base pre-assembly` with `M3x8mm plastic screws`, as shown in the following picture.

![Base Disk](images/assemblies/06/base-disk.jpg)

2. Connect the `fans` as shown in the following picture.

![Fans](images/assemblies/06/fan-connectors.jpg)

3. Connect the push buttons as show in the following picture. Make sure each button is connected to the right place.

![Fans](images/assemblies/06/push-button-connectors.jpg)

4. Connect the `power switch` as shown in the following picture.

![Power Switch](images/assemblies/06/power-switch-connector.jpg)

5. Connect the `light sensors`as shown in the following picture. Make sure you connect the front, left, back, right sensor at the right place.

![Light sensors](images/assemblies/06/light-sensor-connectors.jpg)

6. Install the `LED strips` and use the underneath adhesive to stick with the base, as shown in the following picture:

![LED Strips](images/assemblies/06/led-strips.jpg)

7. Connect the `LED strips` as shown in the following picture.

![LED Strips Connector](images/assemblies/06/led-strips-connectors.jpg)

10. Install the `Ethernet connector` as shown in the following picture.

![Base Audio Ethernet](images/assemblies/06/ethernet-connector.jpg)

11. Connect the `assembled robot power connector` as shown in the following picture.

![Power Connector](images/assemblies/06/power-connector-JST.jpg)

12. Connect the `PSU control PCB` to the `battery charger` with the `assembled JST PHR-6 cable`, as shown in the
    following picture.

![JST PHR-6 Cable](images/assemblies/06/jst-phr6-cable.jpg)

13. Connect the `assembled white LEDs` as shown in the following picture. The LED labelled "PSU" is connected to the connector labelled "Charg. S.".

![White LEDs](images/assemblies/06/led-connectors.jpg)

14. Connect the `Micro USB connector` as shown in the following picture.

![Micro USB connector](images/assemblies/06/micro-usb-connector-teensy.jpg)

15. Connect 2 `25-cm long 20 AWG Adafruit MAX9744 wires` to the `12V Buck-Boost PCB`, as shown in the following picture.

![Adafruit MAX9744 Wires 1](images/assemblies/06/amplifier-wires-1.jpg)

16. Connect those wires to the `Adafruit MAX9744`, as shown in the following picture.

![Adafruit MAX9744 Wires 2](images/assemblies/06/amplifier-wires-2.jpg)

17. Connect the `farthest speakers` to the `Adafruit MAX9744`, as shown in the following picture.

![Adafruit MAX9744 Wires 3](images/assemblies/06/amplifier-wires-3.jpg)

18. Install the second `Adafruit MAX9744` onto the top of the first one with `M2 nuts`, as shown in the following
   picture.

![Adafruit MAX9744](images/assemblies/06/amplifier.jpg)

19. Connect 2 `25-cm long 20 AWG Adafruit MAX9744 wires` to the `12V Buck-Boost PCB`, as shown in the following picture.

![Adafruit MAX9744 Wires 4](images/assemblies/06/amplifier-wires-4.jpg)

20. Connect those wires to the second `Adafruit MAX9744`, as shown in the following picture.

![Adafruit MAX9744 Wires 5](images/assemblies/06/amplifier-wires-5.jpg)

21. Connect the `nearest speakers` to the second `Adafruit MAX9744`, as shown in the following picture.

![Adafruit MAX9744 Wires 6](images/assemblies/06/amplifier-wires-6.jpg)

22. Connect the `Adafruit MAX9744 I2C cables` to the `PSU control PCB`, as shown in the following picture.

![Amplifier](images/assemblies/06/amplifier-i2c.jpg)

23. Secure the wires with tie wraps as shown in the following picture.

![Tie Wraps](images/assemblies/06/tie-wraps.jpg)

24. Connect the `female power connector with ferrules` to a `12V Buck-Boost PCB` output.

25. Install the `19V Buck-Boost PCB`  with `M3 nuts` (orange circle), as shown in the following picture.

![19V Buck-Boost PCB](images/assemblies/06/19V-buck-boost-nuts.jpg)

26. Connect the `19V Buck-Boost PCB` input to a `PSU control PCB` output with `8-cm-long 16 AWG wires`, as shown in the
    following picture.

![19V Buck-Boost PCB Wires](images/assemblies/06/19V-buck-boost-wires.jpg)

27. Connect the `male power connector with ferrules` to a `19V Buck-Boost PCB` output.

## C. Setup the Battery Charger

### Required Parts

| Part                     | Quantity | Image                                                          |
| ------------------------ | -------- | -------------------------------------------------------------- |
| `Micro USB Cable`        | 1        |                                                                |
| `19V Power Adapter`      | 1        |                                                                |

### Steps

1. Open the [project](../../firmwares/psu_control) in PlatformIO.
2. Change the value `FIRMWARE_MODE` in [config.h](../../firmwares/psu_control/src/config.h)
   to `FIRMWARE_MODE_SETUP_BATTERY_CHARGER`.
3. Make sure the battery is removed.
4. Connect the micro USB cable to the computer and the Teensy LC.
5. Turn off the robot.
6. Connect the `19V Power Adapter` to the base.
7. Turn on the robot.
8. Click on the upload button.

## D. Finish the Audio Base Assembly

### Required Parts

| Part                         | Quantity | Image                                                                                  |
| ---------------------------- | -------- | -------------------------------------------------------------------------------------- |
| `Battery - RRC2054-2`        | 1        | ![Battery - RRC2054-2](images/electronics/RRC2054-2.jpg)                               |
| `Ground Loop Noise Isolator` | 2        | ![Ground Loop Noise Isolator](images/electronics/ground-loop-noise-isolator.jpg)       |
| `Diffuser Plastic Sheet`     | 1        |                                                                                        |

### Steps

1. Install the `battery` and the `ground loop noise isolators` with tie wraps, as shown in the following picture.

![Battery](images/assemblies/06/battery.jpg)

2. Connect the `ground loop noise isolators` to the `Adafruit MAX9744`.

3. Cut the LED diffusers according to the groove dimensions.
    - 16 mm x 48 mm (2x)
    - 13 mm x 530 mm (2x)
4. Sand the back of the LED diffusers.
5. Install the LED diffusers with super glue.
