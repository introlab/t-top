<launch>

    <arg name="language" default="fr"/> <!-- Options: fr or en -->

    <node pkg="speech_to_text" type="speech_to_text_node.py" name="speech_to_text_node">
        <param name="sampling_frequency" value="16000"/>
        <param name="frame_sample_count" value="743"/>
        <param name="request_frame_count" value="4"/>
        <param name="language" value="$(arg language)"/>

        <remap from="audio_in" to="audio_signed_16_16000"/>
        <remap from="audio_in/filter_state" to="speech_to_text/filter_state"/>
        <remap from="text" to="speech_to_text/transcript"/>
    </node>

    <node name="audio_capture" type="alsa_capture_node" pkg="audio_utils" output="screen">
        <param name="device"   type="string"   value="default"/>
        <param name="format"   type="string"   value="signed_16"/>
        <param name="channel_count"   type="int"   value="1"/>
        <param name="sampling_frequency" type="int" value="16000"/>
        <param name="frame_sample_count" type="int" value="743"/>
        <param name="merge" type="bool" value="false" />
        <param name="merge_gain" type="double" value="1.0" />
        <param name="latency_us" type="int" value="40000" />

        <remap from="audio_out" to="audio_signed_16_16000"/>
    </node>

</launch>
