<launch>
    <arg name="visualization" default="false"/>
    <arg name="simulation" default="false"/>
    <arg name="use_echo_cancellation" default="true"/>
    <arg name="ec_volume_percent" default="90" />
    <arg name="rviz" default="false"/>
    <arg name="neural_network_inference_type" default="trt_gpu"/>
    <arg name="is_stand_alone" default="false"/>

    <arg name="output" default="log"/>

    <!-- Platform nodes -->
    <include file="$(find t_top)/launch/platform.launch">
        <arg name="use_echo_cancellation" value="$(arg use_echo_cancellation)"/>
    </include>

    <!-- Perceptions -->
    <include file="$(find t_top)/launch/perceptions/ego_noise_reduction.launch"/>

    <include file="$(find t_top)/launch/perceptions/odas.launch">
        <arg if="$(arg use_echo_cancellation)" name="odas_configuration_path" value="$(find t_top)/config/configuration_16SoundsUSB_pulseaudio_ec.cfg"/>
        <arg unless="$(arg use_echo_cancellation)" name="odas_configuration_path" value="$(find t_top)/config/configuration_16SoundsUSB_pulseaudio.cfg"/>
        <arg name="visualization" value="$(arg visualization)"/>
        <arg name="rviz" value="$(arg rviz)"/>
        <arg name="use_echo_cancellation" value="$(arg use_echo_cancellation)"/>
        <arg name="output" value="$(arg output)"/>
    </include>

    <include file="$(find t_top)/launch/perceptions/video_analyzer.launch">
        <arg name="visualization" value="$(arg visualization)"/>
        <arg name="neural_network_inference_type" value="$(arg neural_network_inference_type)"/>
    </include>


    <!-- Behaviors -->
    <include file="$(find t_top)/launch/behaviors/teleoperation.launch">
        <arg name="simulation" value="$(arg simulation)"/>
    </include>

    <include file="$(find t_top)/launch/behaviors/opentera.launch">
        <arg name="is_stand_alone" value="$(arg is_stand_alone)"/>
        <arg name="output" value="$(arg output)"/>
    </include>

    <include file="$(find t_top)/launch/behaviors/sound_following.launch">
        <arg name="simulation" value="$(arg simulation)"/>
        <arg name="min_activity" value="0.3"/>
    </include>

    <include file="$(find t_top)/launch/behaviors/face_following.launch">
        <arg name="simulation" value="$(arg simulation)"/>
    </include>

</launch>
